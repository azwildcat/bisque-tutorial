%=======================================
%
% $Id$
%
%=======================================

\documentclass[12pt]{article} 
\usepackage{amssymb} 	% additional symbols (there are more packages)
\usepackage{amsmath}
\usepackage{graphicx}
\usepackage{color}

%(Thanks, http://www.terminally-incoherent.com/blog/2007/09/19/latex-squeezing-the-vertical-white-space/)
\usepackage{mdwlist} % for compact lists 

%\usepackage{hyperref}
\usepackage[pagebackref=true,breaklinks=true,letterpaper=true,
colorlinks=true,urlcolor=blue,citecolor=blue,bookmarks=false,
pdfborder={0 0 0}]{hyperref}

\usepackage{anysize} 		% margin package sets tighter margins
\marginsize{1.0in}{1.0in}{0.5in}{1.0in} 	% small margins - left, right, top, bottom

\begin{document}
%\author{Yekaterina Kharitonova}
%\title{Title}
%\maketitle

\hfill Last modified: \today \\%by Yekaterina Kharitonova

\noindent
{\Large \bf Getting started with Bisque}\\ 

This document is intended for users who would like to integrate their analysis code into the Bisque system.
Assuming that you already have that code and the input  required to run it (files and parameters), this overview
outlines steps needed to get started with Bisque~\cite{Bisque}.
%(\url{http://www.bioimage.ucsb.edu/downloads/Bisque%20Database}). 

% -----------------------------------------------
\section{Preliminary steps}
\label{sec:Preliminary}
\subsection{iPlant account}
\label{sec:iPlant_account}

Use Trellis~\cite{Trellis}
to create an account and log-in to the dashboard.
One of the services listed under ``Available services" is Bisque.

\begin{figure}[h]
\centering
  \includegraphics[width=0.6\linewidth]{./figures/available_services.png}
  \label{fig:available_services}
  \caption{The services available through your Trellis dashboard.}
\end{figure}

\begin{figure}[h]
\centering
  \includegraphics[width=0.6\linewidth]{./figures/pending_request.png}
  \label{fig:pending_request}
  \caption{Pending requests.}
\end{figure}

Once the request is approved, use the 
``Go to BISQUE"~\cite{Bisque-iplant} link to access the 
Bisque database hosted by iPlant (see Fig.\ref{fig:pending_request}).


\subsection{Analysis code}
\label{sec:analysis_code}

Select an existing program to turn into a Bisque module.
This analysis code can be written in any language, and with the help
of the Bisque API, it can be ``wrapped" and connected to the
Bisque services.

For the purposes of this tutorial, I am using a C++ program
that finds points of interest in images. 
I created an executable binary, which I can run on the command line.

\begin{verbatim}
./find_points --output-directory=$OUTDIR --has-tip-growth --min-blob-size=5 
--max-blob-size=50 --num-threads=8 $INDAT/Pos001_S001_t%02d_z%02d_ch00.tif
\end{verbatim}

The above command shows the parameters that are required
to run the code: \texttt{\$OUTDIR} is a path to an output
directory, \texttt{\$INDAT} is a path to where the input files are, 
%and \texttt{Pos001_S001_t\%02d_z\%02d_ch00}
%is the Unix printf-style pattern, which describes the format of the 
%input file names.
with the input file names described using a Unix printf-style pattern.

% -----------------------------------------------
%\section{Creating a module}
%\label{sec:creating-a-module}
\subsection{Overview of steps}
Before we dive in, let's look at the broad picture of the work ahead of us.
Following a Bisque module creation tutorial~\cite{Bisque-module-creation}, below are the steps for setting up a working module:
\begin{enumerate}
\item Creating a module definition XML document
\item Making the module code work with Bisque (either by modifying the module code to use the Bisque API or by writing a wrapper / conversion glue code)
\item Creating a web server or running the Engine Server
\subitem Engine Service - a configuration file on how the Engine Service will run your code 
\item Registering the module with Bisque 
\end{enumerate}


\input{module_definition.tex}

% -----------------------------------------------
{\small
\bibliographystyle{abbrv}
\bibliography{references}
}
\end{document}
